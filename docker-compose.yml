version: "2"
services:
    nginx1.14: 
        image: nginx:1.14
        ports:
           - 80:80
        links:
           - php7.2.8
        depends_on:
           - mysql5.6.35
           - php7.2.8
           - redis
        volumes:
           - ./www:/usr/share/nginx/html
           - ./nginx/conf.d:/etc/nginx/conf.d
           - ./nginx/nginx.conf:/etc/nginx/nginx.conf
           - ./nginx/logs:/var/log/nginx
        container_name: nginx1.14
        restart: always
    mysql5.6.35: 
        image: mysql:5.6.35
        environment: 
            TZ: 'Asia/Shanghai' 
            MYSQL_ROOT_PASSWORD: "root_lihq1403"
        ports: 
            - 3306:3306
        volumes: 
            - ./mysql/data:/var/lib/mysql
            - ./mysql/conf/my.cnf:/etc/my.cnf
            - ./mysql/logs:/var/log/mysql
        container_name: mysql5.6.35
        restart: always
    php7.2.8: 
        image: "lihq1403/php:7.2.8-fpm"
        build: ./php
        expose:
            - 9000
        volumes:
            - ./www:/usr/local/nginx/html
            - ./php/conf.d/php.ini:/usr/local/etc/php/conf.d/php.ini
        container_name: php7.2.8-fpm
        restart: always
    redis:
        image: redis:latest
        ports: 
            - 6379:6379
        container_name: redis
        restart: always
         
  
